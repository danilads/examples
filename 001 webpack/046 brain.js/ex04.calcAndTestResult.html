<!DOCTYPE html>
<html>
    
    <head>
        <meta charset="utf-8">
    </head>
	<script src="brain2.0.js"></script>
    <body>
        
    </body>
    <script>
		// ----------------
		// FIND THE BEST SETING FOR CONFIG
		// ----------------

		// --- [STATE] ---
		const testNumber = 10;
		const isTestMode = true;


	
		// --- [CYCLE FIND] ---
		let passAllResults = false;
		let cycles = 0; // repeats
		let net = {}

		while (!passAllResults && !isTestMode) {
			console.log('--+ cycle', cycles);

			// --- [CONFIG] ---
			net = new brain.NeuralNetwork({
				binaryThresh: 0.5,
				hiddenLayers: [300], // array of ints for the sizes of the hidden layers in the network
				activation: 'leaky-relu', // supported activation types: ['sigmoid', 'relu', 'leaky-relu', 'tanh'],
				leakyReluAlpha: 0.1, // supported for activation type 'leaky-relu'
			});

			// --- [TRAIN] ---
			net.train([
				{ input: [0, 0], output: [0] },
				{ input: [0, 1], output: [1] },
				{ input: [1, 0], output: [1] },
				{ input: [1, 1], output: [2] },
				{ input: [1, 2], output: [3] },
			]);

			// --- [NaN test]
			if (isNaN(Math.round(net.run([0, 0])))) {
				continue;
			}

			// --- [TESTING ALL COMBINATION FOR ALL NUMBERS] ---
			let isBreak = false;
			let isCycle = false;
			for (let i=testNumber;i>=0;i--) {
				if (isBreak) {
					break;
				}
				for (let j=i;j>0;j--) {
					const n1 = i-j;
					const n2 = j;
					// console.log('--+ combination 1', n1, n2);
					// console.log('--+ combination 2 (reverse', n2, n1);
					if (Math.round(net.run([n1, n2])) !== n1 + n2) {
						isCycle = true;
						isBreak = true;
						break;
					}
					// reverse
					if (Math.round(net.run([n2, n1])) !== n1 + n2) {
						isCycle = true;
						isBreak = true;
						break;
					}
				}
			}

			cycles += 1;

			if (!isCycle) {
				passAllResults = true;
			}
		}
		
		
		if (passAllResults) {
			console.log('passAllResults');
			console.log('cycles', cycles);
			console.log(JSON.stringify(net.toJSON()));
		}
    </script>
</html>