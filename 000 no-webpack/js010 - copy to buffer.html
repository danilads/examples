<html>
  <head>
			<meta charset="utf-8" />
			<meta name="viewport" content="width=device-width, initial-scale=1"/>
			<title></title>
	<style>
	
	</style>
  </head>
  <body>
	<p>
	  <button class="js-textareacopybtn" style="vertical-align:top;">Copy Textarea</button>
	  <textarea class="js-copytextarea">Hello I'm some text</textarea>
	</p>
    <script>
		//копировать в буфер извне
		var copyTextareaBtn = document.querySelector('.js-textareacopybtn');

		copyTextareaBtn.addEventListener('click', function(event) {
		  var copyTextarea = document.querySelector('.js-copytextarea');
			console.log('---wtf?',copyTextarea);
		  copyTextarea.focus();
		  copyTextarea.select();

		  try {
			var successful = document.execCommand('copy');
			var msg = successful ? 'successful' : 'unsuccessful';
			console.log('Copying text command was ' + msg);
		  } catch (err) {
			console.log('Oops, unable to copy');
		  }
		});
		

		// //контролируем копирование
		// document.addEventListener("copy", (event) => {
		// 		console.log('---MODIFY COPY EVENT');
		// 		const selection = document.getSelection();
		// 		event.clipboardData.setData('text/plain', selection.toString().toUpperCase());
		// 		event.preventDefault();
		// 	}
		// );


		const result = 'some text';
		/// через функцию (новый подход)
		navigator.clipboard.writeText(result);

		/// --- Copy to buffer (через функцию)
		// const textArea = document.createElement('textarea');
		// textArea.value = result;
		//
		// // Avoid scrolling to bottom
		// textArea.style.top = '0';
		// textArea.style.left = '0';
		// textArea.style.position = 'fixed';
		//
		// document.body.appendChild(textArea);
		// textArea.focus();
		// textArea.select();
		//
		// try {
		//   const successful = document.execCommand('copy');
		//   const msg = successful ? 'successful' : 'unsuccessful';
		//   console.log(`Fallback: Copying text command was ${msg}`);
		// } catch (err) {
		//   console.error('Fallback: Oops, unable to copy', err);
		// }
		//

	</script>
  </body>
</html>