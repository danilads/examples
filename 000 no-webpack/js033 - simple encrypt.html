<!DOCTYPE html> 
<html>
<head>
	<meta charset="utf-8" />
	<title></title>
</head>
<body>
	
<script>
    ////РАБОТАЕМ ТОЛЬКО СО СТАНДАРТНЫМИ СИМВОЛАМИ (charCode в пределах 32-126)

    ////----01
        //функция которая генерирует массив cryptArr для функции displacement (нужно символы \ и " - экранировать)
        function generatecryptArr (){
            let arr = [];
            for(let i=32;126>=i;i++){
                arr.push(String.fromCharCode(i));
            }
            return arr.sort(function() {
                return .5 - Math.random();
            });
        
        }
        console.log("---generatecryptArr",generatecryptArr());
    
    ////----02
        //функция которая смещает charCode в пределах 32-126 (по кругу)
        //1 char - символ который смещаем
        //2 ord - (true - в положительную сторону) (false - в отрицательную)
        //3 cryptArr - массив по которому определяем смещение (ключ)
        function displacement(str, ord, cryptArr){
            if(ord){
                return cryptArr[str.charCodeAt(0)-32];
            }
            else{
                return String.fromCharCode(cryptArr.indexOf(str)+32)
            }
            return str;
        }
        let cryptArr = ["+", ":", "K", "Z", "m", "D", "3", "A", ".", "7", ">", " ", "v", "O", "B", "Y", ",", "/", "M", "q", "*", "!", "C", "c", "r", ";", "-", "1", "S", "2", "'", "9", ")", "`", "N", "j", "T", "<", "$", "i", "^", "(", "6", "R", "x", "w", "\"", "#", "?", "g", "@", "u", "t", "f", "I", "{", "H", "&", "]", "_", "l", "d", "E", "L", "J", "}", "Q", "W", "h", "%", "G", "8", "U", "F", "n", "5", "X", "P", "V", "0", "4", "|", "~", "p", "e", "y", "o", "a", "s", "\\", "z", "[", "k", "=", "b"];
        
        let Char = " ";
        let decrChar = displacement(Char,true,cryptArr);
        console.log('--зашифрованый символ',decrChar);
        let encrChar = displacement(decrChar,false,cryptArr);
        console.log('--дешифрованый символ',encrChar);
    
    ////----03
        let n = ' dewdweПРИВЕТwdq~';

        //ШИФРУЕМ
        //если символ изначально имеет charCode вне диапазона - не смещает(оставляет как есть)
        function encrypt (str){
            let result = '';
            for(let i=0;str.length>i;i++){
                //если в пределе 32-126
                if(str.charCodeAt(i)>=32&&str.charCodeAt(i)<=126){
                    result+=displacement(str[i],true,cryptArr);
                }
                else{
                    result+=str[i];
                }
            }
            return result;
        }
    
        //ДЕШИФРУЕМ
        //смещает обратно
        function decrypt (str){
            let result = '';
            for(let i=0;str.length>i;i++){
                //если в пределе 32-126
                if(str.charCodeAt(i)>=32&&str.charCodeAt(i)<=126){
                    result+=displacement(str[i],false,cryptArr);
                }
                else{
                    result+=str[i];
                }
            }
            return result;
        }
        let encString = encrypt(n);
        console.log('---Зашифровали',encString);
        
        let decString = decrypt(encString);
        console.log('---Дешифровали',decString);

    ////----04 тусуем массив
        
		let shortArr1 = [1,2];
		let shortArr2 = [1,2,3];
		let shortArr3 = [1,2,3,4];
		let shortArr4 = [1,2,3,4,5];
		let longArr = ["+", ":", "K", "Z", "m", "D", "3", "A", ".", "7", ">", " ", "v", "O", "B", "Y", ",", "/", "M", "q", "*", "!", "C", "c", "r", ";", "-", "1", "S", "2", "'", "9", ")", "`", "N", "j", "T", "<", "$", "i", "^", "(", "6", "R", "x", "w", "\"", "#", "?", "g", "@", "u", "t", "f", "I", "{", "H", "&", "]", "_", "l", "d", "E", "L", "J", "}", "Q", "W", "h", "%", "G", "8", "U", "F", "n", "5", "X", "P", "V", "0", "4", "|", "~", "p", "e", "y", "o", "a", "s", "\\", "z", "[", "k", "=", "b"];

		//01 arr  - (array target)
		//02 bool - (true - encr / false - decr)
		function recursShafl (arr, encrDecr){
			if(arr.length<2)return arr; //защита от маленького массива
			
			//1)делим масиив по полам и меняем порядок
			let half = 0;
			if(encrDecr){
				half = Math.ceil(arr.length/2);
			}
			else{
				half = Math.floor(arr.length/2);
			}
			
			
			let first = arr.slice(0, half);
			let second = arr.slice(half, arr.length);
		
			//2)шафл в зависимости от формулы
			
			let f = [];
			if(encrDecr){
				f = second.concat(first.reverse());
			}
			else{
				f = second.reverse().concat(first);
			}
				
			return f;
			


		}
		let encr = nonRandShufl(shortArr4, true);
		let decr = nonRandShufl(encr, false);
		console.log('---before',shortArr4);
		console.log('---after encr',encr);
		console.log('---after decr',decr);
</script>
<body>
	
</body>
</html>